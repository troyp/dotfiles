set runtimepath=~/.pentadactyl
set guioptions=bBCrMNsT
set hintkeys="jfkdls;ahgnvurieow"
set incfind
set hlfind
set findcase=smart
set showstatuslinks=status
set strictfocus=mail.google.com:laissez-faire,'chrome:*':laissez-faire,*:moderate
" Ex commands output in a new tab by default (prefs, addons...)
set newtab=all
" make yanks go to clipboard
js editor.defaultRegister="+"

map -g user -b , @:

" C-w closes tab; if last in window closes window.
map -g user -b <C-w> :q<CR>
map -g user -b J <C-d>
map -g user -b K <C-u>
map -g user -b <C-m><C-m> :emenu<SPACE>

" M-Up toggles the navigation and bookmarks toolbars
map -g user -b <A-Up> :set guioptions-=mTB | set showtabline=never<CR>
map -g user -b <A-Down> :set guioptions+=TB | set showtabline=always<CR>
map -g user -b <C-c><C-a> :set guioptions!=TB | set showtabline!=always,never<CR>
map -g user -b <C-c><C-m> :set guioptions!=m<CR>
map -g user -b <C-c><C-t> :set showtabline!=always,never<CR>
map -g user -b <C-c><C-n> :set guioptions!=T<CR>
map -g user -b <C-c><C-b> :set guioptions!=B<CR>
map -g user -b <C-c><C-s> :set guioptions!=B<CR>
map -g user -b <C-S-d> :dialog downloads<CR>

" Restart with C-c C-r
map -g user -b <C-c><C-r> :restart<CR>

" Select
map -g user -b s <pass>
map -g user -b sk :bmarks!<SPACE>
map -g user -b s;k :bmarks<SPACE>
map -g user -b ss :set guioptions!=B<CR>
map -g user -b sh :history!<SPACE>
map -g user -b s;h :history<SPACE>
map -g user -b st :buffer<SPACE>
map -g user -b sj :jumps<CR>
map -g user -b sa :addons<CR>

" Sidebar selection with s, close with S
map -g user -b si :sidebar<SPACE>

" Open in new tab
map -g user -b tt :tabopen<SPACE>
map -g user -b tg :tabopen g<SPACE>
map -g user -b tw :tabopen w<SPACE>
map -g user -b ta :tabopen wa<SPACE>
map -g user -b t3 :tabopen w3<SPACE>
map -g user -b tn :tabopen about:newtab<CR>
map -g user -b tp :pintab!<CR>
map -g user -b td :tabduplicate<CR>
map -g user -b to :tabonly<CR>

" Tab moving helpers
" map -g user -b -arg <C-m>t :tabmove <arg><CR>
map -g user -b tm :tabmove<SPACE>
map -g user -b <A-Left> :tabmove! -1<CR>
map -g user -b <A-Right> :tabmove! +1<CR>
map -g user -b <A-J> :tabnext<CR>
map -g user -b <A-K> :tabprevious<CR>
nmap -builtin -g user -b <C-b> :sidebar bookmarks<CR>
command! d tabduplicate
command! unpinall tabdo unpintab

" Command mode and insert mode
cmap -g user -b <C-Y> <C-V><C-V>
imap -g user -b <C-Y> <C-V><C-V>
command! rc source ~/.pentadactylrc
command! rce viewsource! file:/home/troy/.pentadactylrc

" Visual mode
" C-e end of line, C-a start of line.
" C-y scroll down, C-Y scroll up.
vmap -g user -b <C-a> 0
vmap -g user -b <C-e> $
vmap -g user -b <C-S-Y> <C-e>
" to search and select:
" ----------------------
" 1. press / and type search term
" 2. when satisfied, press enter
" 3. press C-/ to clear highlighting of other matches
" 4. press i to enter insert mode
" 5. press <left> to move to start of match
" 6. press v to enter visual mode
" 7. use visual mode keys j,k,h,l,C-a,C-e, etc to extend selection

" replace builtin <C-a> binding: BROKEN
nmap -g user -b <C-S-X> <C-a>

" Search
" clear the search term highlighting
map -g user -b <C-/> :noh<CR>

" Add hints for anchor elements whose class attribute starts with "vote"
set hinttags+=a[class^='vote']
set hinttags+=a[class^='speed']

"hi Hint font-family: "Monospace"; line-height: 15px; text-shadow: 1px 1px 1px #000; padding: 5px 8px 6px; font-size: 13px; font-weight: normal; color: white; background-color: rgba(0, 0, 0, 0.75); -moz-border-radius: 1em; -moz-box-shadow: 0 0 4px rgba(0,0,0,1);
hi Hint font-family: "Monospace"; line-height: 14px; text-shadow: 1px 1px 1px #888; padding: 5px 8px 6px; font-size: 18px; font-weight: bold; text-transform: uppercase; color: rgb(200, 0, 0); background-color: rgba(240, 255, 240, 0.80); -moz-border-radius: 1em;
hi HintElem background-color: rgba(55, 255, 50, 0.15) !important; -moz-border-radius: 2px;
hi HintActive background-color: rgba(54, 255, 250, 0.2) !important; color: black !important; -moz-border-radius: 2px;

" EdX
command! edx :so ~/.pentadactyl/edx.pentadactyl
command! edxe viewsource! file:/home/troy/.pentadactyl/edx.pentadactyl
edx

" Coursera
set passkeys+='class.coursera.org/.*/lecture/':'hp-+fc<up><down><left><right>'

" Autopager
command! apoff :js autopagerMain.enabledThisSite()

" Pages
command! ac :winopen about:config



